# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
DC = docker-compose
WS = orion_websocket
BACK = orion_backend
FRONT = orion_frontend

# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–º–æ—â—å
help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo "  make reset-ws   - –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –≤–µ–±—Å–æ–∫–µ—Ç–æ–≤"
	@echo "  make logs-ws     - –õ–æ–≥–∏ –≤–µ–±—Å–æ–∫–µ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"
	@echo "  make restart     - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
	@echo "  make build       - –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞"
	@echo "  make cache       - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Symfony"

# –¢–æ—Ç —Å–∞–º—ã–π Hard Reset –¥–ª—è –≤–µ–±—Å–æ–∫–µ—Ç–æ–≤
reset-ws:
	$(DC) stop $(WS)
	$(DC) rm -f $(WS)
	$(DC) up -d --build $(WS)
	@echo "üöÄ –í–µ–±—Å–æ–∫–µ—Ç—ã –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã!"

# –õ–æ–≥–∏ —Å–æ–∫–µ—Ç–æ–≤
logs-ws:
	$(DC) logs -f $(WS)

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
restart:
	$(DC) restart

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
build:
	$(DC) up -d --build

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –±—ç–∫–µ–Ω–¥–∞
cache:
	$(DC) exec $(BACK) php bin/console cache:clear
